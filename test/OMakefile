.PHONY: check clean

USE_OCAMLFIND = true

OCAMLPACKS[] =
    oUnit
    qcheck

OCAMLINCLUDES += ../lib

NATIVE_ENABLED = true
BYTE_ENABLED = true

OCAMLFLAGS    += -thread -warn-error A-58
OCAMLCFLAGS   +=
OCAMLOPTFLAGS +=
OCAML_LINK_FLAGS +=
OCAML_BYTE_LINK_FLAGS +=
OCAML_NATIVE_LINK_FLAGS +=

FILES[] =
    testPromise
    testLazyList
    test

PROGRAM = test
OCAML_LIBS += ../lib/promise
OCAML_CLIBS +=
OCAML_OTHER_LIBS +=
OCAML_LIB_FLAGS +=

.DEFAULT: $(OCamlProgram $(PROGRAM), $(FILES))

check: $(PROGRAM)
    ./$<

clean:
    rm -f \
        $(filter-proper-targets $(ls R, .)) \
        oUnit-suite*.log oUnit-suite.cache
